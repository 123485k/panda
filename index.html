<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<meta name="keywords" content="熊猫书签,Panda Bookmark" />
<meta name="description" content="熊猫书签,Panda Bookmark" />
<title>熊猫书签</title>
<style>
body{margin:16px 20px;padding:0;font-family:Microsoft Yahei;font-size:14px;line-height:30px;word-wrap:break-word;word-break:break-all;}
*{max-width:100%;}
a{color:#000;text-decoration:none;}
img{margin-top:8px;border:0;}
input{margin:8px 0;width:300px;height:18px;}
</style>
</head>
<body>
<script>
var serv='https://loli.vip/';
function exkeyget(type,func){
var exkey=document.getElementById('exkey').value;
if(!exkey){
var xhr=new XMLHttpRequest();
xhr.open('GET','exkey-'+type+'?'+Date.parse(new Date()),true);
xhr.setRequestHeader('Content-Type','x-www-form-urlencoded');
xhr.responseType='text';
xhr.onreadystatechange=function(e){if(xhr.readyState===4 && xhr.status===200){
exkey=xhr.responseText.replace(/[\r\n]/g,'');
if(!exkey){alert('公用账号失效');return;};
func(exkey);
}};
xhr.send(null);return;
};
if(exkey.length<36 || ! Number.isInteger(parseInt(exkey.split('x')[0].substr(32)))){alert('exkey格式错误');return;};
window.location.hash=exkey;
func(exkey);
};
function bookmarkshow(){
exkeyget('bookmark',function(exkey){
var code="javascript:(function(){var a=document.createElement('script');a.setAttribute('src','//"+window.location.hostname+window.location.pathname.substring(0,window.location.pathname.lastIndexOf('/'))+"/panda.js?'+Date.parse(new Date()));"+(document.getElementById('exkey').value?"a.setAttribute('exkey','"+exkey+"');":"")+"document.body.appendChild(a);}());";
document.getElementById('bookmark').innerHTML='<a href="'+code+'"><b>[panda]</b></a><br /><input value="'+code+'" /><br />1.PC浏览器请直接将按钮“[panda]”拖入书签栏。<br />2.IOS请复制代码，将本页添加书签。点击地址栏，长按书签图标编辑，粘贴代码替换网址。<br />3.Android请使用<a href="https://www.mozilla.org/firefox" target="_blank"><u>Firefox</u></a>，长按按钮“[panda]”，将链接加入书签。<br />4.在任意网址（非空白页）运行书签，点击确定跳转至图标页，然后再次运行书签即可解锁。<br />5.在专辑页面运行书签可开启扩展功能面板。<br />';
});
};
function tpmonkeyshow(){
exkeyget('bookmark',function(exkey){
document.getElementById('tpmonkey').innerHTML='1.安装插件：<a href="https://tampermonkey.net/?locale=zh" target="_blank"><u>Tampermonkey</u></a>（<a href="https://www.crx4chrome.com/crx/755/" target="_blank"><u>Chrome大陆镜像</u></a>）<br />2.启用脚本：<a href="'+serv+(document.getElementById('exkey').value?(exkey+'.'):'')+'panda.user.js" target="_blank"><u>panda.user.js</u></a><br />3.解锁里站：<a href="http://c.exhentai.org" target="_blank"><u>c.exhentai.org</u></a>（大陆无法打开里站，故用此地址做跳板）<br />';
});
};
function unlockershow(){
exkeyget('unlocker',function(exkey){
window.location.href=serv+exkey+'.panda.unlock';
});
};
</script>
<b>【熊猫书签】</b><br />
感谢使用熊猫书签，这篇向导很长，请耐心看完。<br />
<a href="javascript:;" onclick="window.scrollTo(0,document.getElementById('apply').offsetTop-14);"><b>点击这里跳过说明，前往应用创建部分！</b></a><br />
<br />
<b>【账号注册】</b><br />
如果您连V:P!И是什么都不知道，或者根本懒得注册，请跳过本节。<br />
<b>注册地址</b>：<a href="https://forums.e-hentai.org/?act=Reg" target="_blank"><u>https://forums.e-hentai.org/?act=Reg</u></a><br />
这个地址中国大陆无法访问，需要搭建<b>欧美私人V:P!И</b>后访问。一定要有<b>欧美私人IP</b>，不能多人共用同IP。<br />
公共IP如果有人注册过，E站数据库会有记录，再有人注册会把两个账号都<b>拉黑</b>，永远无法获得里区权限。<br />
使用<b>中国、日本等亚洲IP</b>注册的账户，也无法获得里区权限。务必选对V:P!И位置，用<b>欧美</b>地区节点。<br />
注册前还要把<b>浏览器语言</b>改成<b>英语</b>，使用<b>中文、日文等语言浏览器</b>注册的账户，无法获得里区权限。<br />
建议用Gmail邮箱注册，使用<b>新浪、搜狐、163、QQ等国内邮箱</b>注册的账户，无法获得里区权限。<br />
注册过程就不多说了，请自己研究。确认键上面应该有个验证码，如果看不到请更换V:P!И。<br />
注册完成等待一周左右时间，账号应该就能获得里区权限，可以参照以下过程登录了：<br />
挂上<b>欧美私人V:P!И</b>，清空<b>浏览器COOKIE</b>，先<a href="https://e-hentai.org/bounce_login.php" target="_blank"><u><b>登录表站</b></u></a>，再<a href="https://exhentai.org" target="_blank"><u><b>访问里站</b></u></a>。<br />
如果还出现熊猫，多等一周换个欧美V:P!И登录，再不行那就是凉了。<br />
<br />
<b>【提取密钥】</b><br />
如果您没有完成账号注册，或者连F12都不会按，请跳过本节。<br />
exkey就是您在里站的COOKIE序列，使用熊猫书签可以解析exkey，实现即时不用V:P!И也能登录私有账号。<br />
示例格式：（这只是个范例，不是可用的exkey）<br />
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa123456x1e2d3c<br />
前32位（aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa）是<b>ipb_pass_hash</b>，也就是重组后的密码。<br />
后几位数字（123456）是<b>ipb_member_id</b>，也就是的用户编号。<br />
x是没有含义但必须要有的<b>分隔符</b>。<br />
x之后（1e2d3c）是<b>igneous</b>，一个有用的校验码。<br />
使用电脑浏览器，<b>按上节教程正常登录里站</b>。按下键盘F12，根据您的浏览器依次找到：<br />
[Edge] Debug-Cookie-exhentai.org<br />
[Chrome] Application-Cookies-exhentai.org<br />
[Firefox] Storage-Cookies-exhentai.org<br />
应该可以看到一个类似于列表的地方，复制<b>ipb_pass_hash</b>、<b>ipb_member_id</b>、<b>igneous</b>这三个变量的值。<br />
然后按照上面的格式规范组合成exkey，把这串密钥保存好，以后就可以用了。<br />
<br />
<b>【常见问题】</b><br />
如果您毫无网络基础知识，请跳过本节。<br />
<b>网络封锁：链接被重置</b><br />
表站被您所在国家的网络运营商屏蔽，类似于中国的G:F!W，请挂载欧美私人V:P!И访问。<br />
里站若没有写入COOKIE，会跳转到被屏蔽的表站，请使用熊猫书签进入。<br />
<b>地域限制：白屏</b><br />
您所在地区的IP被E站火墙拦截，例如日本和其他亚洲地区（规避版权问题），请挂载欧美私人V:P!И访问。<br />
<b>权限不足：熊猫</b><br />
清空浏览器缓存（COOKIE）并重试，还是不行说明账号没有里站权限，请重新注册或使用公共账号。<br />
<b>版权投诉：This gallery has been removed or is unavailable</b><br />
专辑被删或遭遇了版权投诉，后者即便在里站也无法用亚洲IP浏览，需挂载欧美私人V:P!И访问。<br />
<b>流量超限：509 Bandwidth Limit Exceeded</b><br />
当前IP浏览的图片过多被E站服务器限制，可等待配额恢复或重启路由器更换IP。<br />
<b>账号错误：设置/收藏/原图“err”</b><br />
账号被封或修改了密码，即便能访问里站也只是缓存，需重新提取exkey（COOKIE）才可使用全部功能。<br />
我站公共账号主动改成了这种状态，为的是防止某些人手贱乱改设置，影响他人使用。<br />
<br />
<b id="apply">【应用创建】</b><br />
输入exkey使用私有账号，留空使用公用账号（不一定能用，可能已经被封）：<br />
<input type="text" id="exkey" placeholder="exkey" onchange="document.getElementById('bookmark').innerHTML='';document.getElementById('tpmonkey').innerHTML='';if(this.value && (this.value.length<36 || !Number.isInteger(parseInt(this.value.split('x')[0].substr(32))))){this.style.backgroundColor='#FFDDDD';return;};if(this.value){window.location.hash=this.value;}else{history.replaceState(null,null,' ');};this.style.backgroundColor='';" /><br />
如果填写了私有账号，可以收藏当前页面，方便下次使用。<br />
<a href="javascript:;" onclick="bookmarkshow();"><u><b>+原始书签</b></u></a><br />
可以在所有设备和浏览器运行，缺点是每个操作都要手动点击。公用账号无法使用设置、收藏、原图等。<br />
<div id="bookmark"></div>
<a href="javascript:;" onclick="tpmonkeyshow();"><u><b>+油猴脚本</b></u></a><br />
浏览器需安装油猴扩展，所有页面自动运行书签，省去手动点击麻烦。IOS不能安装，请使用原始书签。公用账号无法使用设置、收藏、原图等。<br />
<div id="tpmonkey"></div>
<a href="javascript:;" onclick="unlockershow();"><u><b>+一键解锁</b></u></a><br />
使用前必须清空浏览器缓存，解锁失败几率较大，不推荐使用。公用账号受其他用户影响，浏览方式几乎每秒都会变，还有手贱的改设置屏蔽中文。<br />
<br />
<b>【扩展功能】</b><br />
熊猫书签为里站开发了扩展功能面板，<b>原始书签</b>请在专辑页运行书签，<b>油猴脚本</b>可以自动挂载，<b>一键解锁</b>不支持此功能。<br />
竖屏浏览：更舒服地浏览图片。<br />
打包下载：压缩指定范图片并下载。（并没有实现，招募开发者）<br />
切换账号：输入exkey切换至另一个账号。<br />
范围选择：浏览/打包哪些图片。<br />
宽度设置：竖屏浏览图片的最大宽度。<br />
原图开关：如果存在则优先浏览/打包原图。<br />
<b>（公用账号不支持原图，开启后无法加载图片）</b><br />
<br />
<a href="https://github.com/loligit/panda" target="_blank"><u>GitHub</u></a><br />
<script>
if(window.location.hash){document.getElementById('exkey').value=window.location.hash.split('#').pop();};
</script>
</body>
</html>